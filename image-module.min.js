!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ImageModule=e():t.ImageModule=e()}(self,(()=>(()=>{var t={1989:(t,e,r)=>{var o=r(1789),n=r(401),i=r(7667),a=r(1327),s=r(1866);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},8407:(t,e,r)=>{var o=r(7040),n=r(4125),i=r(2117),a=r(7518),s=r(4705);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},7071:(t,e,r)=>{var o=r(852)(r(5639),"Map");t.exports=o},3369:(t,e,r)=>{var o=r(4785),n=r(1285),i=r(6e3),a=r(9916),s=r(5265);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},6384:(t,e,r)=>{var o=r(8407),n=r(7465),i=r(3779),a=r(7599),s=r(4758),u=r(4309);function c(t){var e=this.__data__=new o(t);this.size=e.size}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},2705:(t,e,r)=>{var o=r(5639).Symbol;t.exports=o},1149:(t,e,r)=>{var o=r(5639).Uint8Array;t.exports=o},6874:t=>{t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},4636:(t,e,r)=>{var o=r(2545),n=r(5694),i=r(1469),a=r(4144),s=r(5776),u=r(6719),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),l=!r&&n(t),p=!r&&!l&&a(t),f=!r&&!l&&!p&&u(t),d=r||l||p||f,h=d?o(t.length,String):[],v=h.length;for(var y in t)!e&&!c.call(t,y)||d&&("length"==y||p&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,v))||h.push(y);return h}},6556:(t,e,r)=>{var o=r(9465),n=r(7813);t.exports=function(t,e,r){(void 0!==r&&!n(t[e],r)||void 0===r&&!(e in t))&&o(t,e,r)}},4865:(t,e,r)=>{var o=r(9465),n=r(7813),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var a=t[e];i.call(t,e)&&n(a,r)&&(void 0!==r||e in t)||o(t,e,r)}},8470:(t,e,r)=>{var o=r(7813);t.exports=function(t,e){for(var r=t.length;r--;)if(o(t[r][0],e))return r;return-1}},9465:(t,e,r)=>{var o=r(8777);t.exports=function(t,e,r){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},3118:(t,e,r)=>{var o=r(3218),n=Object.create,i=function(){function t(){}return function(e){if(!o(e))return{};if(n)return n(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=i},8483:(t,e,r)=>{var o=r(5063)();t.exports=o},4239:(t,e,r)=>{var o=r(2705),n=r(9607),i=r(2333),a=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?n(t):i(t)}},9454:(t,e,r)=>{var o=r(4239),n=r(7005);t.exports=function(t){return n(t)&&"[object Arguments]"==o(t)}},8458:(t,e,r)=>{var o=r(3560),n=r(5346),i=r(3218),a=r(346),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,p=c.hasOwnProperty,f=RegExp("^"+l.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||n(t))&&(o(t)?f:s).test(a(t))}},8749:(t,e,r)=>{var o=r(4239),n=r(1780),i=r(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&n(t.length)&&!!a[o(t)]}},313:(t,e,r)=>{var o=r(3218),n=r(5726),i=r(3498),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!o(t))return i(t);var e=n(t),r=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&r.push(s);return r}},2980:(t,e,r)=>{var o=r(6384),n=r(6556),i=r(8483),a=r(9783),s=r(3218),u=r(1704),c=r(6390);t.exports=function t(e,r,l,p,f){e!==r&&i(r,(function(i,u){if(f||(f=new o),s(i))a(e,r,u,l,t,p,f);else{var d=p?p(c(e,u),i,u+"",e,r,f):void 0;void 0===d&&(d=i),n(e,u,d)}}),u)}},9783:(t,e,r)=>{var o=r(6556),n=r(4626),i=r(7133),a=r(278),s=r(8517),u=r(5694),c=r(1469),l=r(9246),p=r(4144),f=r(3560),d=r(3218),h=r(8630),v=r(6719),y=r(6390),b=r(9881);t.exports=function(t,e,r,g,x,m,_){var j=y(t,r),w=y(e,r),O=_.get(w);if(O)o(t,r,O);else{var S=m?m(j,w,r+"",t,e,_):void 0,z=void 0===S;if(z){var E=c(w),A=!E&&p(w),C=!E&&!A&&v(w);S=w,E||A||C?c(j)?S=j:l(j)?S=a(j):A?(z=!1,S=n(w,!0)):C?(z=!1,S=i(w,!0)):S=[]:h(w)||u(w)?(S=j,u(j)?S=b(j):d(j)&&!f(j)||(S=s(w))):z=!1}z&&(_.set(w,S),x(S,w,g,m,_),_.delete(w)),o(t,r,S)}}},5976:(t,e,r)=>{var o=r(6557),n=r(5357),i=r(61);t.exports=function(t,e){return i(n(t,e,o),t+"")}},6560:(t,e,r)=>{var o=r(5703),n=r(8777),i=r(6557),a=n?function(t,e){return n(t,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:i;t.exports=a},2545:t=>{t.exports=function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}},1717:t=>{t.exports=function(t){return function(e){return t(e)}}},4318:(t,e,r)=>{var o=r(1149);t.exports=function(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}},4626:(t,e,r)=>{t=r.nmd(t);var o=r(5639),n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,a=i&&i.exports===n?o.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,o=s?s(r):new t.constructor(r);return t.copy(o),o}},7133:(t,e,r)=>{var o=r(4318);t.exports=function(t,e){var r=e?o(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},278:t=>{t.exports=function(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e}},8363:(t,e,r)=>{var o=r(4865),n=r(9465);t.exports=function(t,e,r,i){var a=!r;r||(r={});for(var s=-1,u=e.length;++s<u;){var c=e[s],l=i?i(r[c],t[c],c,r,t):void 0;void 0===l&&(l=t[c]),a?n(r,c,l):o(r,c,l)}return r}},4429:(t,e,r)=>{var o=r(5639)["__core-js_shared__"];t.exports=o},1463:(t,e,r)=>{var o=r(5976),n=r(6612);t.exports=function(t){return o((function(e,r){var o=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&n(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++o<i;){var u=r[o];u&&t(e,u,o,a)}return e}))}},5063:t=>{t.exports=function(t){return function(e,r,o){for(var n=-1,i=Object(e),a=o(e),s=a.length;s--;){var u=a[t?s:++n];if(!1===r(i[u],u,i))break}return e}}},2052:(t,e,r)=>{var o=r(2980),n=r(3218);t.exports=function t(e,r,i,a,s,u){return n(e)&&n(r)&&(u.set(r,e),o(e,r,void 0,t,u),u.delete(r)),e}},8777:(t,e,r)=>{var o=r(852),n=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=n},1957:(t,e,r)=>{var o="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=o},5050:(t,e,r)=>{var o=r(7019);t.exports=function(t,e){var r=t.__data__;return o(e)?r["string"==typeof e?"string":"hash"]:r.map}},852:(t,e,r)=>{var o=r(8458),n=r(7801);t.exports=function(t,e){var r=n(t,e);return o(r)?r:void 0}},5924:(t,e,r)=>{var o=r(5569)(Object.getPrototypeOf,Object);t.exports=o},9607:(t,e,r)=>{var o=r(2705),n=Object.prototype,i=n.hasOwnProperty,a=n.toString,s=o?o.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),r=t[s];try{t[s]=void 0;var o=!0}catch(t){}var n=a.call(t);return o&&(e?t[s]=r:delete t[s]),n}},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},1789:(t,e,r)=>{var o=r(4536);t.exports=function(){this.__data__=o?o(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,r)=>{var o=r(4536),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(o){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(e,t)?e[t]:void 0}},1327:(t,e,r)=>{var o=r(4536),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return o?void 0!==e[t]:n.call(e,t)}},1866:(t,e,r)=>{var o=r(4536);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=o&&void 0===e?"__lodash_hash_undefined__":e,this}},8517:(t,e,r)=>{var o=r(3118),n=r(5924),i=r(5726);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:o(n(t))}},5776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var o=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==o||"symbol"!=o&&e.test(t))&&t>-1&&t%1==0&&t<r}},6612:(t,e,r)=>{var o=r(7813),n=r(8612),i=r(5776),a=r(3218);t.exports=function(t,e,r){if(!a(r))return!1;var s=typeof e;return!!("number"==s?n(r)&&i(e,r.length):"string"==s&&e in r)&&o(r[e],t)}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,r)=>{var o,n=r(4429),i=(o=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";t.exports=function(t){return!!i&&i in t}},5726:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,r)=>{var o=r(8470),n=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=o(e,t);return!(r<0||(r==e.length-1?e.pop():n.call(e,r,1),--this.size,0))}},2117:(t,e,r)=>{var o=r(8470);t.exports=function(t){var e=this.__data__,r=o(e,t);return r<0?void 0:e[r][1]}},7518:(t,e,r)=>{var o=r(8470);t.exports=function(t){return o(this.__data__,t)>-1}},4705:(t,e,r)=>{var o=r(8470);t.exports=function(t,e){var r=this.__data__,n=o(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}},4785:(t,e,r)=>{var o=r(1989),n=r(8407),i=r(7071);t.exports=function(){this.size=0,this.__data__={hash:new o,map:new(i||n),string:new o}}},1285:(t,e,r)=>{var o=r(5050);t.exports=function(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,r)=>{var o=r(5050);t.exports=function(t){return o(this,t).get(t)}},9916:(t,e,r)=>{var o=r(5050);t.exports=function(t){return o(this,t).has(t)}},5265:(t,e,r)=>{var o=r(5050);t.exports=function(t,e){var r=o(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}},4536:(t,e,r)=>{var o=r(852)(Object,"create");t.exports=o},3498:t=>{t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},1167:(t,e,r)=>{t=r.nmd(t);var o=r(1957),n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,a=i&&i.exports===n&&o.process,s=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},5357:(t,e,r)=>{var o=r(6874),n=Math.max;t.exports=function(t,e,r){return e=n(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=n(i.length-e,0),u=Array(s);++a<s;)u[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=r(u),o(t,this,c)}}},5639:(t,e,r)=>{var o=r(1957),n="object"==typeof self&&self&&self.Object===Object&&self,i=o||n||Function("return this")();t.exports=i},6390:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},61:(t,e,r)=>{var o=r(6560),n=r(1275)(o);t.exports=n},1275:t=>{var e=Date.now;t.exports=function(t){var r=0,o=0;return function(){var n=e(),i=16-(n-o);if(o=n,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},7465:(t,e,r)=>{var o=r(8407);t.exports=function(){this.__data__=new o,this.size=0}},3779:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},7599:t=>{t.exports=function(t){return this.__data__.get(t)}},4758:t=>{t.exports=function(t){return this.__data__.has(t)}},4309:(t,e,r)=>{var o=r(8407),n=r(7071),i=r(3369);t.exports=function(t,e){var r=this.__data__;if(r instanceof o){var a=r.__data__;if(!n||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(t,e),this.size=r.size,this}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},5703:t=>{t.exports=function(t){return function(){return t}}},6913:(t,e,r)=>{var o=r(6874),n=r(5976),i=r(2052),a=r(236),s=n((function(t){return t.push(void 0,i),o(a,void 0,t)}));t.exports=s},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6557:t=>{t.exports=function(t){return t}},5694:(t,e,r)=>{var o=r(9454),n=r(7005),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(t){return n(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,r)=>{var o=r(3560),n=r(1780);t.exports=function(t){return null!=t&&n(t.length)&&!o(t)}},9246:(t,e,r)=>{var o=r(8612),n=r(7005);t.exports=function(t){return n(t)&&o(t)}},4144:(t,e,r)=>{t=r.nmd(t);var o=r(5639),n=r(5062),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i?o.Buffer:void 0,u=(s?s.isBuffer:void 0)||n;t.exports=u},3560:(t,e,r)=>{var o=r(4239),n=r(3218);t.exports=function(t){if(!n(t))return!1;var e=o(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,r)=>{var o=r(4239),n=r(5924),i=r(7005),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=o(t))return!1;var e=n(t);if(null===e)return!0;var r=c.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==l}},6719:(t,e,r)=>{var o=r(8749),n=r(1717),i=r(1167),a=i&&i.isTypedArray,s=a?n(a):o;t.exports=s},1704:(t,e,r)=>{var o=r(4636),n=r(313),i=r(8612);t.exports=function(t){return i(t)?o(t,!0):n(t)}},236:(t,e,r)=>{var o=r(2980),n=r(1463)((function(t,e,r,n){o(t,e,r,n)}));t.exports=n},5062:t=>{t.exports=function(){return!1}},9881:(t,e,r)=>{var o=r(8363),n=r(1704);t.exports=function(t){return o(t,n(t))}}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={id:o,loaded:!1,exports:{}};return t[o](i,i.exports,r),i.loaded=!0,i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var o={};return(()=>{"use strict";function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(o),r.d(o,{default:()=>m});var a=r(6913),s=r.n(a);const u={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}};function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var v=e((function t(e){n(this,t),i(this,"onCreate",(function(){})),i(this,"onDestroy",(function(){})),i(this,"onUpdate",(function(){})),this.overlay=e.overlay,this.img=e.img,this.options=e.options,this.requestUpdate=e.onUpdate}));var y=function(t){p(s,t);var r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(o){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function s(){var t;n(this,s);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i(c(t=a.call.apply(a,[this].concat(r))),"onCreate",(function(){t.display=document.createElement("div"),Object.assign(t.display.style,t.options.displayStyles),t.overlay.appendChild(t.display)})),i(c(t),"onDestroy",(function(){})),i(c(t),"onUpdate",(function(){if(t.display&&t.img){var e=t.getCurrentSize();if(t.display.innerHTML=e.join(" &times; "),e[0]>120&&e[1]>30)Object.assign(t.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"==t.img.style.float){var r=t.display.getBoundingClientRect();Object.assign(t.display.style,{right:"auto",bottom:"-".concat(r.height+4,"px"),left:"-".concat(r.width+4,"px")})}else{var o=t.display.getBoundingClientRect();Object.assign(t.display.style,{right:"-".concat(o.width+4,"px"),bottom:"-".concat(o.height+4,"px"),left:"auto"})}}})),i(c(t),"getCurrentSize",(function(){return[t.img.width,Math.round(t.img.width/t.img.naturalWidth*t.img.naturalHeight)]})),t}return e(s)}(v);var b=function(t){p(s,t);var r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(o){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function s(){var t;n(this,s);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i(c(t=a.call.apply(a,[this].concat(r))),"onCreate",(function(){t.boxes=[],t.addBox("nwse-resize"),t.addBox("nesw-resize"),t.addBox("nwse-resize"),t.addBox("nesw-resize"),t.positionBoxes()})),i(c(t),"onDestroy",(function(){t.setCursor("")})),i(c(t),"positionBoxes",(function(){var e="".concat(-parseFloat(t.options.handleStyles.width)/2,"px"),r="".concat(-parseFloat(t.options.handleStyles.height)/2,"px");[{left:e,top:r},{right:e,top:r},{right:e,bottom:r},{left:e,bottom:r}].forEach((function(e,r){Object.assign(t.boxes[r].style,e)}))})),i(c(t),"addBox",(function(e){var r=document.createElement("div");Object.assign(r.style,t.options.handleStyles),r.style.cursor=e,r.style.width="".concat(t.options.handleStyles.width,"px"),r.style.height="".concat(t.options.handleStyles.height,"px"),r.addEventListener("mousedown",t.handleMousedown,!1),t.overlay.appendChild(r),t.boxes.push(r)})),i(c(t),"handleMousedown",(function(e){t.dragBox=e.target,t.dragStartX=e.clientX,t.preDragWidth=t.img.width||t.img.naturalWidth,t.setCursor(t.dragBox.style.cursor),document.addEventListener("mousemove",t.handleDrag,!1),document.addEventListener("mouseup",t.handleMouseup,!1)})),i(c(t),"handleMouseup",(function(){t.setCursor(""),document.removeEventListener("mousemove",t.handleDrag),document.removeEventListener("mouseup",t.handleMouseup)})),i(c(t),"handleDrag",(function(e){if(t.img){var r=e.clientX-t.dragStartX;t.dragBox===t.boxes[0]||t.dragBox===t.boxes[3]?t.img.width=Math.round(t.preDragWidth-r):t.img.width=Math.round(t.preDragWidth+r),t.requestUpdate()}})),i(c(t),"setCursor",(function(e){[document.body,t.img].forEach((function(t){t.style.cursor=e}))})),t}return e(s)}(v),g={DisplaySize:y,Resize:b},x=e((function t(e){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),i(this,"initializeModules",(function(){r.removeModules(),r.modules=r.moduleClasses.map((function(t){return new(g[t]||t)(r)})),r.modules.forEach((function(t){t.onCreate()})),r.onUpdate()})),i(this,"onUpdate",(function(){r.repositionElements(),r.modules.forEach((function(t){t.onUpdate()}))})),i(this,"removeModules",(function(){r.modules.forEach((function(t){t.onDestroy()})),r.modules=[]})),i(this,"handleClick",(function(t){if(t.target&&t.target.tagName&&"IMG"===t.target.tagName.toUpperCase()){if(r.img===t.target)return;r.img&&r.hide(),r.show(t.target)}else r.img&&r.hide()})),i(this,"show",(function(t){r.img=t,r.showOverlay(),r.initializeModules()})),i(this,"showOverlay",(function(){r.overlay&&r.hideOverlay(),r.quill.setSelection(null),r.setUserSelect("none"),document.addEventListener("keyup",r.checkImage,!0),r.quill.root.addEventListener("input",r.checkImage,!0),r.overlay=document.createElement("div"),Object.assign(r.overlay.style,r.options.overlayStyles),r.quill.root.parentNode.appendChild(r.overlay),r.repositionElements()})),i(this,"hideOverlay",(function(){r.overlay&&(r.quill.root.parentNode.removeChild(r.overlay),r.overlay=void 0,document.removeEventListener("keyup",r.checkImage),r.quill.root.removeEventListener("input",r.checkImage),r.setUserSelect(""))})),i(this,"repositionElements",(function(){if(r.overlay&&r.img){var t=r.quill.root.parentNode,e=r.img.getBoundingClientRect(),o=t.getBoundingClientRect();Object.assign(r.overlay.style,{left:"".concat(e.left-o.left-1+t.scrollLeft,"px"),top:"".concat(e.top-o.top+t.scrollTop,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px")})}})),i(this,"hide",(function(){r.hideOverlay(),r.removeModules(),r.img=void 0})),i(this,"setUserSelect",(function(t){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(e){r.quill.root.style[e]=t,document.documentElement.style[e]=t}))})),i(this,"checkImage",(function(t){r.img&&(46!=t.keyCode&&8!=t.keyCode||window.Quill.find(r.img).deleteAt(0),r.hide())})),this.quill=e;var a=!1;o.modules&&(a=o.modules.slice()),this.options=s()({},o,u),!1!==a&&(this.options.modules=a),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]}));window.Quill&&window.Quill.register("modules/imageResize",x);const m={ImageResize:x,BaseModule:v,Resize:b,DisplaySize:y}})(),o})()));